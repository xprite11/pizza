<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Arquitectos: IL' MARCO üçï</title>
    <link href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --blueprint-blue: #0A2463;
            --grid-line: rgba(255, 255, 255, 0.2);
            --kitty-pink: #ff85b2;
        }

        body {
            margin: 0; padding: 0; overflow: hidden;
            font-family: 'Roboto', sans-serif;
            background-color: var(--blueprint-blue);
            touch-action: none;
        }

        /* Contenedor de Zoom */
        #zoom-container {
            width: 100vw; height: 100vh;
            transform-origin: 0 0;
            cursor: grab;
        }

        /* El Plano */
        #blueprint-canvas {
            width: 3000px; height: 3000px;
            background-image:
                linear-gradient(to right, var(--grid-line) 1px, transparent 1px),
                linear-gradient(to bottom, var(--grid-line) 1px, transparent 1px);
            background-size: 40px 40px;
            position: relative;
        }

        #pizzeria-sign {
            position: fixed; top: 15px; left: 50%; transform: translateX(-50%);
            background: #FFC300; color: #333; padding: 10px 20px;
            border-radius: 5px; font-family: 'Architects Daughter', cursive;
            font-size: 1.4rem; font-weight: bold; border: 2px solid #333; z-index: 1000;
            box-shadow: 4px 4px 0px #000;
        }

        .draggable-item {
            position: absolute; cursor: grab; z-index: 10;
            display: flex; align-items: center; justify-content: center;
            font-size: 50px; user-select: none;
        }

        /* PANEL MEJORADO */
        #object-panel {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: white; border-top: 6px solid var(--kitty-pink);
            border-top-left-radius: 30px; border-top-right-radius: 30px;
            z-index: 2000; transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform: translateY(calc(100% - 65px));
        }
        #object-panel.open { transform: translateY(0); }

        #panel-handle {
            height: 65px; background: var(--kitty-pink); color: white;
            display: flex; justify-content: center; align-items: center;
            font-weight: bold; cursor: pointer; font-size: 1.2rem; gap: 10px;
        }

        #panel-content {
            padding: 20px; display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 15px; max-height: 400px; overflow-y: auto;
        }

        .object-category {
            grid-column: 1 / -1; color: #333; font-weight: bold;
            border-bottom: 2px solid var(--kitty-pink);
            margin-top: 15px; text-align: left; padding-bottom: 5px;
        }

        .item-card {
            background: #fdfdfd; border: 1px solid #ddd; border-radius: 12px;
            padding: 10px; text-align: center; cursor: pointer;
            transition: 0.2s;
        }
        .item-card:active { transform: scale(0.9); }
        .item-card span { font-size: 35px; display: block; }
        .item-card label { font-size: 10px; color: #666; font-weight: bold; }

        /* Botones Flotantes */
        #ui-layer { position: fixed; top: 80px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 1000; }
        .ui-btn { 
            background: white; border: 2px solid var(--kitty-pink); 
            border-radius: 12px; width: 45px; height: 45px; font-size: 20px;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            box-shadow: 2px 2px 0px var(--kitty-pink);
        }
    </style>
</head>
<body>

    <div id="pizzeria-sign">IL' MARCO - Plano Maestro üìê</div>

    <div id="ui-layer">
        <button class="ui-btn" onclick="zoomIn()">‚ûï</button>
        <button class="ui-btn" onclick="zoomOut()">‚ûñ</button>
        <button class="ui-btn" onclick="limpiar()">üóëÔ∏è</button>
    </div>

    <div id="zoom-container">
        <div id="blueprint-canvas"></div>
    </div>

    <div id="object-panel">
        <div id="panel-handle" onclick="togglePanel()">üìÇ ELEMENTOS DE CONSTRUCCI√ìN</div>
        <div id="panel-content">
            
            <div class="object-category">Paredes y Ventanas</div>
            <div class="item-card" onclick="addObj('üß±', 160, 20, 'Pared Larga')"><span>‚ûñ</span><label>Pared H</label></div>
            <div class="item-card" onclick="addObj('üß±', 20, 160, 'Pared Alta')"><span>|</span><label>Pared V</label></div>
            <div class="item-card" onclick="addObj('üö™', 80, 20, 'Puerta')"><span>üö™</span><label>Puerta</label></div>
            <div class="item-card" onclick="addObj('üñºÔ∏è', 60, 10, 'Ventana')"><span>üü¶</span><label>Ventana</label></div>

            <div class="object-category">Cocina (El Alma)</div>
            <div class="item-card" onclick="addObj('üî•', 120, 120, 'Horno Barro')"><span>‚≠ï</span><label>Horno Barro</label></div>
            <div class="item-card" onclick="addObj('üç≥', 80, 80, 'Horno Pizza')"><span>üî≥</span><label>Horno El√©c.</label></div>
            <div class="item-card" onclick="addObj('üî™', 120, 60, 'Mesada Masa')"><span>‚¨ú</span><label>Mesada Masa</label></div>
            <div class="item-card" onclick="addObj('üßä', 60, 80, 'Heladera')"><span>‚ùÑÔ∏è</span><label>Heladera</label></div>
            <div class="item-card" onclick="addObj('üö∞', 40, 40, 'Bachas')"><span>üíß</span><label>Bachas</label></div>

            <div class="object-category">Sal√≥n y Muebles</div>
            <div class="item-card" onclick="addObj('ü™ë', 40, 40, 'Silla')"><span>ü™ë</span><label>Silla</label></div>
            <div class="item-card" onclick="addObj('üçΩÔ∏è', 80, 80, 'Mesa R')"><span>‚ö™</span><label>Mesa Red.</label></div>
            <div class="item-card" onclick="addObj('üçΩÔ∏è', 100, 100, 'Mesa C')"><span>‚¨ú</span><label>Mesa Cuad.</label></div>
            <div class="item-card" onclick="addObj('üõãÔ∏è', 140, 60, 'Box')"><span>‚ûñ</span><label>Sill√≥n Box</label></div>
            <div class="item-card" onclick="addObj('üç∫', 160, 40, 'Barra')"><span>ü™µ</span><label>Barra</label></div>

            <div class="object-category">Ambiente</div>
            <div class="item-card" onclick="addObj('üåø', 40, 40, 'Planta')"><span>üåø</span><label>Planta</label></div>
            <div class="item-card" onclick="addObj('üì¶', 40, 40, 'Cajas')"><span>üì¶</span><label>Cajas Pizza</label></div>
            <div class="item-card" onclick="addObj('üí°', 30, 30, 'Luz')"><span>üü°</span><label>Luz</label></div>

        </div>
    </div>

    <script>
        const canvas = document.getElementById('blueprint-canvas');
        const zoomContainer = document.getElementById('zoom-container');
        const panel = document.getElementById('object-panel');
        
        let scale = 1;
        let activeItem = null;

        function togglePanel() { panel.classList.toggle('open'); }

        // Sistema de Zoom
        function zoomIn() { scale += 0.1; applyZoom(); }
        function zoomOut() { if(scale > 0.4) scale -= 0.1; applyZoom(); }
        function applyZoom() { zoomContainer.style.transform = `scale(${scale})`; }

        // Agregar objetos al plano
        function addObj(type, w, h, label) {
            const item = document.createElement('div');
            item.className = 'draggable-item';
            
            // Estilos de dibujo t√©cnico
            item.style.width = w + 'px';
            item.style.height = h + 'px';
            item.style.border = "2px solid white";
            item.style.background = "rgba(255,255,255,0.1)";
            item.style.fontSize = "12px";
            item.style.color = "white";
            item.innerHTML = `<div style="text-align:center">${type}<br>${label}</div>`;

            // Posici√≥n inicial centrada en la vista
            item.style.left = (window.scrollX + 200) + 'px';
            item.style.top = (window.scrollY + 200) + 'px';
            
            canvas.appendChild(item);
            makeDraggable(item);
            togglePanel();
        }

        function makeDraggable(el) {
            let startX, startY, initialLeft, initialTop;

            el.addEventListener('touchstart', dragStart);
            el.addEventListener('mousedown', dragStart);

            function dragStart(e) {
                activeItem = el;
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                
                startX = clientX;
                startY = clientY;
                initialLeft = el.offsetLeft;
                initialTop = el.offsetTop;
                
                document.addEventListener('touchmove', dragMove, {passive: false});
                document.addEventListener('mousemove', dragMove);
                document.addEventListener('touchend', dragEnd);
                document.addEventListener('mouseup', dragEnd);
            }

            function dragMove(e) {
                if (!activeItem) return;
                e.preventDefault();
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                
                // Ajustar movimiento por la escala del zoom
                let dx = (clientX - startX) / scale;
                let dy = (clientY - startY) / scale;
                
                // Snap a 20px
                let newX = Math.round((initialLeft + dx) / 20) * 20;
                let newY = Math.round((initialTop + dy) / 20) * 20;
                
                el.style.left = newX + 'px';
                el.style.top = newY + 'px';
            }

            function dragEnd() {
                activeItem = null;
                document.removeEventListener('touchmove', dragMove);
                document.removeEventListener('mousemove', dragMove);
            }

            el.addEventListener('dblclick', () => el.remove());
        }

        // Zoom con la rueda del mouse
        window.addEventListener('wheel', (e) => {
            if (e.ctrlKey) {
                e.preventDefault();
                e.deltaY < 0 ? zoomIn() : zoomOut();
            }
        }, {passive: false});

        function limpiar() { if(confirm("¬øReiniciar el plano?")) canvas.innerHTML = ""; }
    </script>
</body>
</html>
